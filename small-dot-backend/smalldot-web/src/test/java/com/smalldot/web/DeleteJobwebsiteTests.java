package com.smalldot.web;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.ResponseEntity;
import org.springframework.web.client.RestTemplate;

import java.util.Arrays;
import java.util.List;

import static java.lang.String.format;

@SpringBootTest
class DeleteJobwebsiteTests {
    @Autowired
    RestTemplate restTemplate;

    @Test
    void contextLoads() throws InterruptedException {
        List<Integer> longs = Arrays.asList(new Integer[]{
                306589
                ,306588
                ,306587
                ,306586
                ,306585
                ,306584
                ,306583
                ,306582
                ,306581
                ,306580
                ,306579
                ,306578
                ,306577
                ,306576
                ,306575
                ,306574
                ,306573
                ,306572
                ,306571
                ,306570
                ,306569
                ,306568
                ,306567
                ,306566
                ,306565
                ,306564
                ,306563
                ,306562
                ,306561
                ,306560
                ,306559
                ,306558
                ,306557
                ,306556
                ,306555
                ,306554
                ,306553
                ,306552
                ,306551
                ,306550
                ,306549
                ,306548
                ,306547
                ,306546
                ,306545
                ,306544
                ,306543
                ,306542
                ,306541
                ,306540
                ,306539
                ,306538
                ,306537
                ,306536
                ,306535
                ,306534
                ,306533
                ,306532
                ,306531
                ,306530
                ,306529
                ,306528
                ,306527
                ,306526
                ,306525
                ,306524
                ,306523
                ,306522
                ,306521
                ,306520
                ,306519
                ,306518
                ,306517
                ,306516
                ,306515
                ,306514
                ,306513
                ,306512
                ,306511
                ,306510
                ,306509
                ,306508
                ,306507
                ,306506
                ,306505
                ,306504
                ,306503
                ,306502
                ,306501
                ,306500
                ,306499
                ,306498
                ,306497
                ,306496
                ,306495
                ,306494
                ,306493
                ,306492
                ,306491
                ,306490
                ,306489
                ,306488
                ,306487
                ,306486
                ,306485
                ,306484
                ,306483
                ,306482
                ,306481
                ,306480
                ,306479
                ,306478
                ,306477
                ,306476
                ,306475
                ,306474
                ,306473
                ,306472
                ,306471
                ,306470
                ,306469
                ,306468
                ,306467
                ,306466
                ,306465
                ,306464
                ,306463
                ,306462
                ,306461
                ,306460
                ,306459
                ,306458
                ,306457
                ,306456
                ,306455
                ,306454
                ,306453
                ,306452
                ,306451
                ,306450
                ,306449
                ,306448
                ,306447
                ,306446
                ,306445
                ,306444
                ,306443
                ,306442
                ,306441
                ,306440
                ,306439
                ,306438
                ,306437
                ,306436
                ,306435
                ,306434
                ,306433
                ,306432
                ,306431
                ,306430
                ,306429
                ,306428
                ,306427
                ,306426
                ,306425
                ,306424
                ,306423
                ,306422
                ,306421
                ,306420
                ,306419
                ,306418
                ,306417
                ,306416
                ,306415
                ,306414
                ,306413
                ,306412
                ,306411
                ,306410
                ,306409
                ,306408
                ,306407
                ,306406
                ,306405
                ,306404
                ,306403
                ,306402
                ,306401
                ,306400
                ,306399
                ,306398
                ,306397
                ,306396
                ,306395
                ,306394
                ,306393
                ,306392
                ,306391
                ,306390
                ,306389
                ,306388
                ,306387
                ,306386
                ,306385
                ,306384
                ,306383
                ,306382
                ,306381
                ,306380
                ,306379
                ,306378
                ,306377
                ,306376
                ,306375
                ,306374
                ,306373
                ,306372
                ,306371
                ,306370
                ,306369
                ,306368
                ,306367
                ,306366
                ,306365
                ,306364
                ,306363
                ,306362
                ,306361
                ,306360
                ,306359
                ,306358
                ,306357
                ,306356
                ,306355
                ,306354
                ,306353
                ,306352
                ,306351
                ,306350
                ,306349
                ,306348
                ,306347
                ,306346
                ,306345
                ,306344
                ,306343
                ,306342
                ,306341
                ,306340
                ,306339
                ,306338
                ,306337
                ,306336
                ,306335
                ,306334
                ,306333
                ,306332
                ,306331
                ,306330
                ,306329
                ,306328
                ,306327
                ,306326
                ,306325
                ,306324
                ,306323
                ,306322
                ,306321
                ,306320
                ,306319
                ,306318
                ,306317
                ,306316
                ,306315
                ,306314
                ,306313
                ,306312
                ,306311
                ,306310
                ,306309
                ,306308
                ,306307
                ,306306
                ,306305
        });
        for (Integer aLong : longs) {
            deleteBatch(aLong);
            Thread.sleep(300);
        }
    }

    private void deleteBatch(Integer taskId) {
        String url = format("https://ncpm.zhaopin.com/fbJobwebsite/delete?taskId=%s", taskId);
        HttpHeaders headers = new HttpHeaders();
        String token = "6f203e3a-4c13-4cb5-a7bd-e408306d92f3";
        headers.add("token", token);
        HttpEntity<String> requestEntity = new HttpEntity<>(null, headers);
        ResponseEntity<String> resEntity = restTemplate.exchange(url.toString(), HttpMethod.GET, requestEntity, String.class);
        System.out.println(resEntity);
    }

}
